name: three_state
start_date: 2024-01-01
end_date: 2024-12-31
nslots: 8
jobs: 8

subpop_setup:
  geodata: model_input/geodata.csv
  mobility: model_input/mobility.csv

initial_conditions:
  method: SetInitialConditions
  initial_conditions_file: model_input/initial_conditions.csv
  allow_missing_subpops: TRUE
  allow_missing_compartments: TRUE

compartments:
  infection_stage: ["S", "E", "I", "R"]

seir:
  integration:
    method: rk4
    dt: 0.25
  parameters:
    sigma:
      value: 1 / 4
    gamma:
      value: 1 / 5
    Ro:
      value: 1
  transitions:
    - source: ["S"]
      destination: ["E"]
      rate: ["Ro * gamma"]
      proportional_to: [["S"], ["I"]]
      proportion_exponent: ["1", "1"]
    - source: ["E"]
      destination: ["I"]
      rate: ["sigma"]
      proportional_to: ["E"]
      proportion_exponent: ["1"]
    - source: ["I"]
      destination: ["R"]
      rate: ["gamma"]
      proportional_to: ["I"]
      proportion_exponent: ["1"]

seir_modifiers:
  scenarios:
    - state_varied_Ro
  modifiers:
    nc_varied_Ro:
      method: SinglePeriodModifier
      parameter: Ro
      subpop: NC
      period_start_date: 2024-01-01
      period_end_date: 2024-12-31
      value: 2.4
    sc_varied_Ro:
      method: SinglePeriodModifier
      parameter: Ro
      subpop: SC
      period_start_date: 2024-01-01
      period_end_date: 2024-12-31
      value: 2.5
    ga_varied_Ro:
      method: SinglePeriodModifier
      parameter: Ro
      subpop: GA
      period_start_date: 2024-01-01
      period_end_date: 2024-12-31
      value: 2.6
    state_varied_Ro:
      method: StackedModifier
      modifiers:
        - nc_varied_Ro
        - sc_varied_Ro
        - ga_varied_Ro


outcomes:
  method: delayframe
  outcomes:
    hospitalizations:
      source:
        incidence:
          infection_stage: "I"
      probability:
        value: 1
      delay:
        value: 1
      duration:
        value: 10

outcome_modifiers:
  scenarios:
    - state_varied_incidH
  modifiers:
    nc_hosp_probability:
      method: SinglePeriodModifier
      parameter: incidH::probability
      subpop: NC
      period_start_date: 2024-01-01
      period_end_date: 2024-12-31
      value: 0.05
    sc_hosp_probability:
      method: SinglePeriodModifier
      parameter: incidH::probability
      subpop: SC
      period_start_date: 2024-01-01
      period_end_date: 2024-12-31
      value: 0.09
    ga_hosp_probability:
      method: SinglePeriodModifier
      parameter: incidH::probability
      subpop: NC
      period_start_date: 2024-01-01
      period_end_date: 2024-12-31
      value: 0.07
    nc_sc_hosp_delay:
      method: SinglePeriodModifier
      parameter: incidH::delay
      subpop:
        - NC
        - SC
      subpop_groups:
        -
          - NC
          - SC
      period_start_date: 2024-01-01
      period_end_date: 2024-12-31
      value: 7
    ga_hosp_delay:
      method: SinglePeriodModifier
      parameter: incidH::delay
      subpop: GA
      period_start_date: 2024-01-01
      period_end_date: 2024-12-31
      value: 9
    state_varied_incidH:
      method: StackedModifier
      modifiers:
        - nc_hosp_probability
        - sc_hosp_probability
        - ga_hosp_probability
        - nc_sc_hosp_delay
        - ga_hosp_delay
